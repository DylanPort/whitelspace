{
  "version": "0.1.0",
  "name": "whistle_network",
  "metadata": {
    "address": "5cmaPy5i8efSWSwRVVuWr9VUx8sAMv6qMVSE1o82TRgc",
    "description": "WHISTLE Network - Decentralized RPC Provider with Staking",
    "repository": "https://github.com/DylanPort/whitelspace"
  },
  "instructions": [
    {
      "name": "InitializePool",
      "accounts": [
        {"name": "authority", "isMut": true, "isSigner": true},
        {"name": "stakingPool", "isMut": true, "isSigner": false},
        {"name": "tokenVault", "isMut": true, "isSigner": false},
        {"name": "whistleMint", "isMut": false, "isSigner": false},
        {"name": "tokenProgram", "isMut": false, "isSigner": false},
        {"name": "systemProgram", "isMut": false, "isSigner": false},
        {"name": "rent", "isMut": false, "isSigner": false}
      ],
      "args": [
        {"name": "minStakeAmount", "type": "u64"},
        {"name": "tokensPerWhistle", "type": "u64"},
        {"name": "cooldownPeriod", "type": "i64"}
      ]
    },
    {
      "name": "Stake",
      "accounts": [
        {"name": "staker", "isMut": true, "isSigner": true},
        {"name": "stakingPool", "isMut": true, "isSigner": false},
        {"name": "stakerAccount", "isMut": true, "isSigner": false},
        {"name": "stakerTokenAccount", "isMut": true, "isSigner": false},
        {"name": "tokenVault", "isMut": true, "isSigner": false},
        {"name": "tokenProgram", "isMut": false, "isSigner": false},
        {"name": "systemProgram", "isMut": false, "isSigner": false},
        {"name": "clock", "isMut": false, "isSigner": false}
      ],
      "args": [
        {"name": "amount", "type": "u64"}
      ]
    },
    {
      "name": "Unstake",
      "accounts": [
        {"name": "staker", "isMut": true, "isSigner": true},
        {"name": "stakingPool", "isMut": true, "isSigner": false},
        {"name": "stakerAccount", "isMut": true, "isSigner": false},
        {"name": "stakerTokenAccount", "isMut": true, "isSigner": false},
        {"name": "tokenVault", "isMut": true, "isSigner": false},
        {"name": "tokenProgram", "isMut": false, "isSigner": false},
        {"name": "systemProgram", "isMut": false, "isSigner": false},
        {"name": "clock", "isMut": false, "isSigner": false}
      ],
      "args": [
        {"name": "amount", "type": "u64"}
      ]
    },
    {
      "name": "InitializePaymentVault",
      "accounts": [
        {"name": "authority", "isMut": true, "isSigner": true},
        {"name": "paymentVault", "isMut": true, "isSigner": false},
        {"name": "systemProgram", "isMut": false, "isSigner": false},
        {"name": "rent", "isMut": false, "isSigner": false}
      ],
      "args": []
    },
    {
      "name": "RegisterProvider",
      "accounts": [
        {"name": "provider", "isMut": true, "isSigner": true},
        {"name": "providerAccount", "isMut": true, "isSigner": false},
        {"name": "providerTokenAccount", "isMut": true, "isSigner": false},
        {"name": "tokenVault", "isMut": true, "isSigner": false},
        {"name": "tokenProgram", "isMut": false, "isSigner": false},
        {"name": "systemProgram", "isMut": false, "isSigner": false},
        {"name": "clock", "isMut": false, "isSigner": false}
      ],
      "args": [
        {"name": "endpoint", "type": "string"},
        {"name": "bondAmount", "type": "u64"}
      ]
    },
    {
      "name": "ProcessQueryPayment",
      "accounts": [
        {"name": "user", "isMut": true, "isSigner": true},
        {"name": "paymentVault", "isMut": true, "isSigner": false},
        {"name": "providerAccount", "isMut": true, "isSigner": false},
        {"name": "stakingPool", "isMut": false, "isSigner": false},
        {"name": "systemProgram", "isMut": false, "isSigner": false}
      ],
      "args": [
        {"name": "provider", "type": "publicKey"},
        {"name": "queryCost", "type": "u64"}
      ]
    },
    {
      "name": "ClaimProviderEarnings",
      "accounts": [
        {"name": "provider", "isMut": true, "isSigner": true},
        {"name": "providerAccount", "isMut": true, "isSigner": false},
        {"name": "paymentVault", "isMut": true, "isSigner": false},
        {"name": "systemProgram", "isMut": false, "isSigner": false}
      ],
      "args": []
    },
    {
      "name": "ClaimStakerRewards",
      "accounts": [
        {"name": "staker", "isMut": true, "isSigner": true},
        {"name": "stakerAccount", "isMut": true, "isSigner": false},
        {"name": "stakingPool", "isMut": false, "isSigner": false},
        {"name": "paymentVault", "isMut": true, "isSigner": false},
        {"name": "systemProgram", "isMut": false, "isSigner": false}
      ],
      "args": []
    },
    {
      "name": "RecordHeartbeat",
      "accounts": [
        {"name": "provider", "isMut": false, "isSigner": true},
        {"name": "providerAccount", "isMut": true, "isSigner": false},
        {"name": "clock", "isMut": false, "isSigner": false}
      ],
      "args": []
    },
    {
      "name": "UpdateEndpoint",
      "accounts": [
        {"name": "provider", "isMut": false, "isSigner": true},
        {"name": "providerAccount", "isMut": true, "isSigner": false}
      ],
      "args": [
        {"name": "newEndpoint", "type": "string"}
      ]
    }
  ],
  "accounts": [
    {
      "name": "StakingPool",
      "type": {
        "kind": "struct",
        "fields": [
          {"name": "authority", "type": "publicKey"},
          {"name": "whistleMint", "type": "publicKey"},
          {"name": "tokenVault", "type": "publicKey"},
          {"name": "totalStaked", "type": "u64"},
          {"name": "totalAccessTokens", "type": "u64"},
          {"name": "minStakeAmount", "type": "u64"},
          {"name": "tokensPerWhistle", "type": "u64"},
          {"name": "isActive", "type": "bool"},
          {"name": "createdAt", "type": "i64"},
          {"name": "cooldownPeriod", "type": "i64"},
          {"name": "maxStakePerUser", "type": "u64"},
          {"name": "rateLocked", "type": "bool"},
          {"name": "bump", "type": "u8"}
        ]
      }
    },
    {
      "name": "StakerAccount",
      "type": {
        "kind": "struct",
        "fields": [
          {"name": "staker", "type": "publicKey"},
          {"name": "stakedAmount", "type": "u64"},
          {"name": "accessTokens", "type": "u64"},
          {"name": "lastStakeTime", "type": "i64"},
          {"name": "nodeOperator", "type": "bool"},
          {"name": "votingPower", "type": "u64"},
          {"name": "dataEncrypted", "type": "u64"},
          {"name": "pendingRewards", "type": "u64"},
          {"name": "bump", "type": "u8"}
        ]
      }
    },
    {
      "name": "ProviderAccount",
      "type": {
        "kind": "struct",
        "fields": [
          {"name": "provider", "type": "publicKey"},
          {"name": "endpoint", "type": "string"},
          {"name": "registeredAt", "type": "i64"},
          {"name": "isActive", "type": "bool"},
          {"name": "stakeBond", "type": "u64"},
          {"name": "totalEarned", "type": "u64"},
          {"name": "pendingEarnings", "type": "u64"},
          {"name": "queriesServed", "type": "u64"},
          {"name": "reputationScore", "type": "u64"},
          {"name": "uptimePercentage", "type": "u64"},
          {"name": "responseTimeAvg", "type": "u64"},
          {"name": "accuracyScore", "type": "u64"},
          {"name": "lastHeartbeat", "type": "i64"},
          {"name": "slashedAmount", "type": "u64"},
          {"name": "penaltyCount", "type": "u32"},
          {"name": "bump", "type": "u8"}
        ]
      }
    },
    {
      "name": "PaymentVault",
      "type": {
        "kind": "struct",
        "fields": [
          {"name": "authority", "type": "publicKey"},
          {"name": "totalCollected", "type": "u64"},
          {"name": "providerPool", "type": "u64"},
          {"name": "bonusPool", "type": "u64"},
          {"name": "treasury", "type": "u64"},
          {"name": "stakerRewardsPool", "type": "u64"},
          {"name": "lastDistribution", "type": "i64"},
          {"name": "bump", "type": "u8"}
        ]
      }
    }
  ],
  "errors": [
    {"code": 0, "name": "InvalidInstruction", "msg": "Invalid instruction data"},
    {"code": 1, "name": "AccountAlreadyInitialized", "msg": "Account already initialized"},
    {"code": 2, "name": "InsufficientFunds", "msg": "Insufficient funds"},
    {"code": 3, "name": "InvalidAccountData", "msg": "Invalid account data"},
    {"code": 4, "name": "InvalidSeeds", "msg": "Invalid PDA seeds"},
    {"code": 5, "name": "MissingRequiredSignature", "msg": "Missing required signature"},
    {"code": 6, "name": "IncorrectProgramId", "msg": "Incorrect program ID"}
  ],
  "constants": [
    {"name": "OFFICIAL_WHISTLE_MINT", "type": "string", "value": "6Hb2xgEhyN9iVVH3cgSxYjfN774ExzgiCftwiWdjpump"},
    {"name": "MAX_STAKE_PER_USER", "type": "u64", "value": "100000000000000"},
    {"name": "MIN_PROVIDER_BOND", "type": "u64", "value": "1000000000"},
    {"name": "QUERY_COST", "type": "u64", "value": "1000000"},
    {"name": "HEARTBEAT_TIMEOUT", "type": "i64", "value": "300"},
    {"name": "MIN_HEARTBEAT_INTERVAL", "type": "i64", "value": "30"}
  ]
}


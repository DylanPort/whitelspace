╔═══════════════════════════════════════════════════════════════════╗
║     GHOST WHISTLE - AUTOMATED VULTR DEPLOYMENT                    ║
║     Complete Terminal-Based Setup                                 ║
╚═══════════════════════════════════════════════════════════════════╝

✅ WHAT WAS CREATED:

5 Automated Scripts:
  ├─ generate-keypairs.sh      Generate 10 fresh node keypairs
  ├─ deploy-to-vultr.sh        Deploy to a single VPS
  ├─ deploy-all-vultr.sh       Deploy to all 5 VPS at once
  ├─ check-all-nodes.sh        Check status of all nodes
  └─ get-node-addresses.sh     Get wallet addresses & balances

Plus:
  └─ QUICK-START-VULTR.md      Complete step-by-step guide


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🚀 QUICK START (3 Commands to Deploy Everything)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

STEP 1: Setup 5 VPS on Vultr (via web dashboard)
  → Go to: https://www.vultr.com/
  → Deploy 5 servers (Ubuntu 22.04, $6/month each)
  → Locations: US-East, US-West, EU, Asia, Other
  → Add your SSH key during setup
  → Copy all 5 IP addresses

STEP 2: Generate Keypairs (1 minute)
  bash generate-keypairs.sh

STEP 3: Deploy All Nodes (5 minutes)
  bash deploy-all-vultr.sh IP1 IP2 IP3 IP4 IP5

  Example:
  bash deploy-all-vultr.sh 45.76.1.1 108.61.2.2 149.28.3.3 207.148.4.4 95.179.5.5

DONE! ✅


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 ALL COMMANDS REFERENCE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. GENERATE KEYPAIRS
   bash generate-keypairs.sh
   
   Creates 10 fresh keypairs in node-keys/ directory
   Displays all wallet addresses


2. DEPLOY ALL SERVERS (Recommended)
   bash deploy-all-vultr.sh <IP1> <IP2> <IP3> <IP4> <IP5>
   
   Deploys all 10 nodes across 5 VPS
   Installs dependencies, configures firewall, starts services
   Total time: ~5 minutes


3. DEPLOY SINGLE SERVER (Advanced)
   bash deploy-to-vultr.sh <SERVER_IP> <NODE1> <NODE2> [SIGNALING_IP]
   
   Examples:
   bash deploy-to-vultr.sh 1.2.3.4 1 2 localhost          # First server
   bash deploy-to-vultr.sh 5.6.7.8 3 4 1.2.3.4            # Other servers


4. CHECK STATUS
   bash check-all-nodes.sh <IP1> <IP2> <IP3> <IP4> <IP5>
   
   Shows PM2 status for all nodes on all servers


5. GET WALLET ADDRESSES
   bash get-node-addresses.sh <IP1> <IP2> <IP3> <IP4> <IP5>
   
   Lists all 10 node wallet addresses and current balances
   Use this to fund nodes with SOL


6. VIEW LOGS
   ssh root@SERVER_IP 'cd /root/ghost-whistle && pm2 logs --lines 50'
   
   View recent logs from any server


7. RESTART NODES
   ssh root@SERVER_IP 'cd /root/ghost-whistle && pm2 restart all'
   
   Restart all nodes on a server


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🪟 WINDOWS USERS
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Option 1: Git Bash (Recommended)
  → Install: https://git-scm.com/downloads
  → Right-click in project folder → "Git Bash Here"
  → Run: bash generate-keypairs.sh

Option 2: WSL (Windows Subsystem for Linux)
  → Install: wsl --install
  → Open: "Ubuntu" from Start menu
  → cd /mnt/c/Users/salva/Downloads/Encrypto
  → Run: bash generate-keypairs.sh

Option 3: PowerShell (With adjustments)
  → Use ssh.exe (built-in on Windows 10+)
  → Scripts work but may need manual execution


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📝 EXAMPLE: FULL DEPLOYMENT WORKFLOW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 1. Open Git Bash in project folder
cd /c/Users/salva/Downloads/Encrypto

# 2. Generate keypairs
bash generate-keypairs.sh
# ✓ Generates 10 keypairs
# ✓ Shows all wallet addresses

# 3. Setup Vultr servers (via web)
# Deploy 5 servers, get IPs:
# IP1 = 45.76.1.1 (US-East)
# IP2 = 108.61.2.2 (US-West)
# IP3 = 149.28.3.3 (EU)
# IP4 = 207.148.4.4 (Asia)
# IP5 = 95.179.5.5 (Other)

# 4. Deploy all nodes
bash deploy-all-vultr.sh 45.76.1.1 108.61.2.2 149.28.3.3 207.148.4.4 95.179.5.5
# ✓ Installs everything on all servers
# ✓ Starts all 10 nodes
# ✓ Takes ~5 minutes

# 5. Check status
bash check-all-nodes.sh 45.76.1.1 108.61.2.2 149.28.3.3 207.148.4.4 95.179.5.5
# ✓ Shows all nodes are "online"

# 6. Get wallet addresses
bash get-node-addresses.sh 45.76.1.1 108.61.2.2 149.28.3.3 207.148.4.4 95.179.5.5
# ✓ Displays all 10 addresses

# 7. Fund nodes (use your Solana wallet)
solana transfer <NODE_1_ADDRESS> 0.02 --allow-unfunded-recipient
solana transfer <NODE_2_ADDRESS> 0.02 --allow-unfunded-recipient
# ... repeat for all 10

# 8. Update frontend (index.html)
# Change: const SIGNALING_SERVER_URL = 'ws://45.76.1.1:8080';

# 9. Test your relay!
# Open frontend, send anonymous transaction


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💰 COST BREAKDOWN
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Vultr VPS (5 servers × $6/month):     $30/month
Node SOL balances (10 × 0.02 SOL):    ~$2 one-time
Frontend (Netlify):                   FREE
Backend (included on Server 1):       FREE
                                      ─────────────
TOTAL:                                $30/month

For a production-ready, geographically distributed relay network! ✨


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 WHAT YOU GET
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ 10 bootstrap relay nodes
✅ 5 geographic locations (US, EU, Asia, etc.)
✅ Different IP addresses for each node pair
✅ Automatic restart on failure (PM2)
✅ Auto-start on server reboot
✅ Firewall configured
✅ Secure (keypairs never in Git)
✅ Production-ready
✅ Maximum privacy ⭐⭐⭐⭐⭐


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📚 DOCUMENTATION
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

→ QUICK-START-VULTR.md          Complete step-by-step guide
→ PRODUCTION-NODE-DEPLOYMENT.md  Detailed deployment options
→ DEPLOYMENT-COMMANDS.txt        This file (quick reference)
→ SECURITY-CLEANUP-SUMMARY.txt   Security improvements


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔧 TROUBLESHOOTING
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

PROBLEM: "bash: command not found"
→ You're on Windows
→ Install Git Bash: https://git-scm.com/downloads
→ Or use WSL: wsl --install

PROBLEM: "Permission denied (publickey)"
→ Your SSH key isn't on the Vultr server
→ Re-deploy server and select your SSH key
→ Or manually add: ssh-copy-id root@SERVER_IP

PROBLEM: "Node not responding"
→ Check status: bash check-all-nodes.sh IP1 IP2 IP3 IP4 IP5
→ View logs: ssh root@SERVER_IP 'cd /root/ghost-whistle && pm2 logs'
→ Restart: ssh root@SERVER_IP 'cd /root/ghost-whistle && pm2 restart all'

PROBLEM: "Nodes have no SOL"
→ Get addresses: bash get-node-addresses.sh IP1 IP2 IP3 IP4 IP5
→ Fund each: solana transfer NODE_ADDRESS 0.02 --allow-unfunded-recipient


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Ready to deploy? Start with:
  bash generate-keypairs.sh
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


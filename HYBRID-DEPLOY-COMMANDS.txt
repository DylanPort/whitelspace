â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     GHOST WHISTLE - HYBRID DEPLOYMENT COMMANDS                    â•‘
â•‘     Local Bootstrap Nodes + Render Cloud Services                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ ARCHITECTURE:
  ğŸ  LOCAL: 10 Bootstrap Nodes (handle SOL) - FREE
  â˜ï¸  RENDER: Signaling + Backend + Frontend - $14/month


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸš€ QUICK START (4 Steps)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

STEP 1: Generate Keypairs & Start Local Nodes (2 minutes)
  
  # PowerShell (Windows):
  cd node-keys
  for ($i=1; $i -le 10; $i++) {
    solana-keygen new --outfile "bootstrap-node-$i-keypair.json" --no-bip39-passphrase --force
  }
  cd ..
  
  # OR Git Bash:
  bash generate-keypairs.sh
  
  # Start all 10 bootstrap nodes locally:
  pm2 start ecosystem.config.js
  
  # Check they're running:
  pm2 status


STEP 2: Deploy to Render (5 minutes)
  
  1. Push code to GitHub (node-keys/ is gitignored âœ…)
     git add .
     git commit -m "Ready for hybrid deployment"
     git push
  
  2. Go to: https://render.com/
  
  3. New â†’ Blueprint â†’ Connect your repo
  
  4. Render will detect render.yaml and create:
     - ghost-whistle-signaling ($7/month)
     - ghost-whistle-backend ($7/month)
  
  5. Get your Render URLs:
     - Signaling: https://ghost-whistle-signaling.onrender.com
     - Backend: https://ghost-whistle-backend.onrender.com


STEP 3: Update Local Nodes to Use Render Signaling (1 minute)
  
  # Edit ecosystem.config.js
  # Find all nodes and change:
  SIGNALING_SERVER: 'wss://ghost-whistle-signaling.onrender.com'
  
  # Restart local nodes:
  pm2 restart all
  
  # Verify connection:
  pm2 logs --lines 50


STEP 4: Deploy Frontend to Netlify (3 minutes)
  
  1. Go to: https://netlify.com/
  
  2. New Site from Git â†’ Select your repo
  
  3. Build settings:
     - Build command: (leave empty)
     - Publish directory: .
  
  4. Add environment variables:
     SIGNALING_SERVER=wss://ghost-whistle-signaling.onrender.com
     BACKEND_API=https://ghost-whistle-backend.onrender.com
  
  5. Deploy!


DONE! Your hybrid network is live! ğŸ‰


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ DAILY MANAGEMENT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Start Your Day:
  
  # Check if local nodes are running
  pm2 status
  
  # If not, start them:
  pm2 start ecosystem.config.js
  
  # View logs:
  pm2 logs --lines 50


Check Node Balances (Weekly):
  
  # PowerShell:
  for ($i=1; $i -le 10; $i++) {
    $addr = solana-keygen pubkey "node-keys/bootstrap-node-$i-keypair.json"
    $bal = solana balance $addr
    Write-Host "Node $i: $bal"
  }
  
  # Refill if needed:
  solana transfer NODE_ADDRESS 0.02 --allow-unfunded-recipient


Stop Nodes (When Done):
  
  pm2 stop all


Check Render Services:
  
  # Signaling server health:
  curl https://ghost-whistle-signaling.onrender.com/health
  
  # Backend API health:
  curl https://ghost-whistle-backend.onrender.com/health


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”’ SECURITY FEATURES (Implemented)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Bootstrap Node Validation:
   - Only nodes with ID containing "bootstrap-node" can handle SOL
   - User nodes CANNOT process relay transactions
   - Security check in handleRelayRequest()
   - Security check in handleRelayForward()

âœ… Wallet Protection:
   - Keypairs stay on YOUR local computer
   - Never committed to Git (.gitignore)
   - Never uploaded to Render
   - Only bootstrap nodes have keypairs

âœ… Separation of Concerns:
   - Bootstrap nodes (local) = Handle SOL
   - User nodes (cloud) = Participate only
   - Signaling server (cloud) = Route messages
   - Backend API (cloud) = Public endpoints


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’° COST COMPARISON
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

                    Hybrid      VPS (5 Servers)   All Local
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Bootstrap Nodes     LOCAL       $30/month         LOCAL
Signaling Server    $7/month    On VPS (free)     LOCAL
Backend API         $7/month    On VPS (free)     LOCAL
Frontend            FREE        FREE              LOCAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL:              $14/mo      $30/mo            $0/mo

Privacy Level:      â­â­â­      â­â­â­â­â­         â­
24/7 Uptime:        âœ…          âœ…                âŒ
Geo Distribution:   âŒ          âœ…                âŒ
Easy Setup:         âœ…          âŒ                âœ…
Security:           â­â­â­â­â­   â­â­â­             â­â­â­â­â­


RECOMMENDATION: Hybrid for development, VPS for production privacy


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ§ª TESTING YOUR SETUP
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Check Local Nodes:
   pm2 status
   # All 10 bootstrap nodes should show "online"

2. Check Render Services:
   curl https://ghost-whistle-signaling.onrender.com/health
   curl https://ghost-whistle-backend.onrender.com/health
   # Both should return: {"status":"ok"}

3. Check Node Connection:
   pm2 logs --lines 50 | grep "Connected to signaling"
   # Should see 10 nodes connected

4. Test Relay:
   - Open your Netlify frontend
   - Connect wallet
   - Send 0.01 SOL anonymously (3 hops)
   - Watch local logs: pm2 logs --lines 50
   - Should see relay hopping through your local nodes!

5. Verify Only Bootstrap Nodes Handle SOL:
   pm2 logs --lines 100 | grep "BOOTSTRAP"
   # Should see: "Node Type: ğŸ’° BOOTSTRAP (Can handle SOL)"


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ TROUBLESHOOTING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PROBLEM: "Local nodes not connecting to Render signaling"
  
  âœ“ Check SIGNALING_SERVER in ecosystem.config.js:
    Should be: wss://your-signaling.onrender.com
    NOT: ws://localhost:8080
  
  âœ“ Restart nodes:
    pm2 restart all
  
  âœ“ Check logs:
    pm2 logs signaling-server


PROBLEM: "Render services sleeping (free tier)"
  
  âœ“ Upgrade to Starter plan ($7/month per service)
  âœ“ Or use a keep-alive service (cron-job.org)
  âœ“ Or accept 30s cold start delay


PROBLEM: "Frontend can't connect to backend"
  
  âœ“ Check environment variables in Netlify dashboard
  âœ“ Make sure URLs use HTTPS (not HTTP)
  âœ“ Check CORS settings in server.js


PROBLEM: "Relay not working"
  
  âœ“ Check local nodes are running: pm2 status
  âœ“ Check nodes have SOL: solana balance NODE_ADDRESS
  âœ“ Check logs: pm2 logs --lines 100
  âœ“ Verify only bootstrap nodes selected (not user nodes)


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“š FILES CREATED FOR HYBRID DEPLOYMENT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ HYBRID-DEPLOYMENT.md         Complete hybrid deployment guide
âœ“ HYBRID-DEPLOY-COMMANDS.txt   This file (quick reference)
âœ“ render.yaml                   Render configuration
âœ“ user-node-client.js           User node (no SOL handling)
âœ“ node-client.js                Updated with security checks

Security Updates in node-client.js:
  âœ“ IS_BOOTSTRAP_NODE check at startup
  âœ“ handleRelayRequest() blocks non-bootstrap nodes
  âœ“ handleRelayForward() blocks non-bootstrap nodes
  âœ“ Clear logging of node type


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ WHAT YOU GET
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… 10 Bootstrap Nodes (LOCAL)
   - Handle all SOL relay transactions
   - Wallets secure on your computer
   - Control when they run

âœ… Professional Cloud Services (RENDER)
   - Public signaling server
   - Public backend API
   - 99.9% uptime
   - SSL/HTTPS included

âœ… Static Frontend (NETLIFY)
   - Fast CDN delivery
   - Free tier
   - Auto-deploy from Git

âœ… Security & Privacy
   - Wallets never leave your computer
   - Only bootstrap nodes handle SOL
   - User nodes can participate safely

âœ… Cost Effective
   - $14/month for cloud services
   - No VPS management
   - Easy scaling


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Ready to deploy? Start with:
  pm2 start ecosystem.config.js
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”


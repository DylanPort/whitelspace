{
  "version": 3,
  "sources": ["../../../../Downloads/Encrypto/netlify/functions/x402-validate.js"],
  "sourceRoot": "C:/Users/salva/AppData/Local/Temp/tmp-22768-PoJAqnC90p59",
  "sourcesContent": ["// Stateless validation (in production, use JWT tokens with embedded expiry)\nexports.handler = async (event, context) => {\n  const headers = {\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Headers': 'Content-Type',\n    'Access-Control-Allow-Methods': 'POST, OPTIONS'\n  };\n\n  if (event.httpMethod === 'OPTIONS') {\n    return { statusCode: 200, headers, body: '' };\n  }\n\n  try {\n    const { accessToken } = JSON.parse(event.body || '{}');\n    \n    if (!accessToken) {\n      return {\n        statusCode: 200,\n        headers,\n        body: JSON.stringify({ ok: false, error: 'missing_token' })\n      };\n    }\n\n    // Allow FREE_ACCESS token for node/staking operations (free features)\n    if (accessToken === 'FREE_ACCESS') {\n      return {\n        statusCode: 200,\n        headers,\n        body: JSON.stringify({ \n          ok: true,\n          expiresAt: 9999999999,\n          note: 'FREE_ACCESS granted for node/staking operations'\n        })\n      };\n    }\n\n    // Simple stateless validation - check if token format is valid\n    // In production, use JWT tokens with embedded expiry and signature\n    if (!accessToken.startsWith('atk_') || accessToken.length < 20) {\n      return {\n        statusCode: 200,\n        headers,\n        body: JSON.stringify({ ok: false, error: 'invalid_token' })\n      };\n    }\n\n    // Accept all valid format tokens (stateless - can't track expiry without shared storage)\n    // In production, use JWT with embedded expiry that can be verified without state\n    return {\n      statusCode: 200,\n      headers,\n      body: JSON.stringify({ \n        ok: true,\n        note: 'Stateless validation - use JWT in production for expiry tracking'\n      })\n    };\n  } catch (e) {\n    return {\n      statusCode: 500,\n      headers,\n      body: JSON.stringify({ ok: false, error: 'internal_error' })\n    };\n  }\n};\n\n"],
  "mappings": ";;;AACA,QAAQ,UAAU,OAAO,OAAO,YAAY;AAC1C,QAAM,UAAU;AAAA,IACd,+BAA+B;AAAA,IAC/B,gCAAgC;AAAA,IAChC,gCAAgC;AAAA,EAClC;AAEA,MAAI,MAAM,eAAe,WAAW;AAClC,WAAO,EAAE,YAAY,KAAK,SAAS,MAAM,GAAG;AAAA,EAC9C;AAEA,MAAI;AACF,UAAM,EAAE,YAAY,IAAI,KAAK,MAAM,MAAM,QAAQ,IAAI;AAErD,QAAI,CAAC,aAAa;AAChB,aAAO;AAAA,QACL,YAAY;AAAA,QACZ;AAAA,QACA,MAAM,KAAK,UAAU,EAAE,IAAI,OAAO,OAAO,gBAAgB,CAAC;AAAA,MAC5D;AAAA,IACF;AAGA,QAAI,gBAAgB,eAAe;AACjC,aAAO;AAAA,QACL,YAAY;AAAA,QACZ;AAAA,QACA,MAAM,KAAK,UAAU;AAAA,UACnB,IAAI;AAAA,UACJ,WAAW;AAAA,UACX,MAAM;AAAA,QACR,CAAC;AAAA,MACH;AAAA,IACF;AAIA,QAAI,CAAC,YAAY,WAAW,MAAM,KAAK,YAAY,SAAS,IAAI;AAC9D,aAAO;AAAA,QACL,YAAY;AAAA,QACZ;AAAA,QACA,MAAM,KAAK,UAAU,EAAE,IAAI,OAAO,OAAO,gBAAgB,CAAC;AAAA,MAC5D;AAAA,IACF;AAIA,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,IAAI;AAAA,QACJ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF,SAAS,GAAG;AACV,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU,EAAE,IAAI,OAAO,OAAO,iBAAiB,CAAC;AAAA,IAC7D;AAAA,EACF;AACF;",
  "names": []
}
